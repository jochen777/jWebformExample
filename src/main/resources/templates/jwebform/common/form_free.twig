{# todo don't use theme here! #}
{% macro jw_renderStart(form) %}
{{ form.startEnd.start | raw }}
{% endmacro %}

{# todo don't use theme here! #}
{% macro jw_renderEnd(form) %}
{{ form.startEnd.end | raw }}
{% endmacro %}

{% macro renderSubmit(element) %}
<input tabindex="{{ element.tabIndex }}" type="submit" value="Save">
{% endmacro %}

{% macro startingDiv(producerInfo) %}
<div class="form-group {{ producerInfo.elementResult.validationResult.isSuccess? "has-success":
(producerInfo.elementResult.validationResult.isError?"has-error":"")
}}">
{% endmacro %}

{% macro label(name, label) %}
<label class="control-label" for="{{ name }}">{{ label }}:</label>
{% endmacro %}



{% macro renderTextType(producerInfo, type) %}
{{ startingDiv(producerInfo) }}
{{ label(producerInfo.nameOfInput, producerInfo.element.oneValueElement.decoration.label) }}
<input class="form-control" tabindex="{{ producerInfo.tabIndex }}" type="{{ type }}" name="{{ producerInfo.nameOfInput }}" value="{{ producerInfo.elementResult.value }}" 
{% if producerInfo.element.oneValueElement.decoration.helptext is not empty %}
aria-describedby="helpBlock-{{ producerInfo.nameOfInput }}"
{% endif %} >
{% if producerInfo.element.oneValueElement.decoration.helptext is not empty %}
<span id="helpBlock-{{ producerInfo.nameOfInput }}" class="help-block">{{ producerInfo.element.oneValueElement.decoration.helptext }}</span>
{% endif %}
{% if producerInfo.elementResult.validationResult.isError %}
<span class="helpBlock error">{{ producerInfo.elementResult.validationResult.message }}</span>
{% endif %}
</div>
{% endmacro %}

{% macro renderTextAreaType(producerInfo) %}
{{ startingDiv(producerInfo) }}
{{ label(producerInfo.nameOfInput, producerInfo.element.oneValueElement.decoration.label) }}
<textarea class="form-control" tabindex="{{ producerInfo.tabIndex }}" name="{{ producerInfo.nameOfInput }}"  
{% if producerInfo.element.oneValueElement.decoration.helptext is not empty %}
aria-describedby="helpBlock-{{ producerInfo.nameOfInput }}"
{% endif %} >{{ producerInfo.elementResult.value }}</textarea>
{% if producerInfo.element.oneValueElement.decoration.helptext is not empty %}
<span id="helpBlock-{{ producerInfo.nameOfInput }}" class="help-block">{{ producerInfo.element.oneValueElement.decoration.helptext }}</span>
{% endif %}
</div>
{% endmacro %}

{% macro renderRadioType(producerInfo) %}
{{ startingDiv(producerInfo) }}
{{ label(producerInfo.nameOfInput, producerInfo.element.oneValueElement.decoration.label) }}
{% for radioEntry in producerInfo.element.entries %}
<div class="radio">
<label>
  <input type="radio" name="{{ producerInfo.nameOfInput }}" id="form-radio-{{ producerInfo.nameOfInput }}-{{ radioEntry.key}}" 
  value="{{ radioEntry.key}}" {{ producerInfo.elementResult.value == radioEntry.key?"checked":"" }}>
    {{ radioEntry.value}}</label>
</div>
{% endfor %}
</div>
{% endmacro %}

{% macro renderTextDateType(producerInfo) %}
{{ startingDiv(producerInfo) }}
{{ label(producerInfo.nameOfInput, producerInfo.element.decoration.label) }}
{% for piChild in producerInfo.childs %}
{{ jw_renderElementFree(piChild) }}
{% endfor %}
</div>
{% endmacro %}


{% macro renderSelectDateType(producerInfo) %}
{{ startingDiv(producerInfo) }}
{{ label(producerInfo.nameOfInput, producerInfo.element.decoration.label) }}
{% for piChild in producerInfo.childs %}
{{ jw_renderElementFree(piChild) }}
{% endfor %}
</div>
{% endmacro %}


{% macro renderSelectType(producerInfo) %}
{{ startingDiv(producerInfo) }}
{{ label(producerInfo.nameOfInput, producerInfo.element.oneValueElement.decoration.label) }}
<select class="form-control" tabindex="{{ producerInfo.tabIndex }}" name="{{ producerInfo.nameOfInput }}" aria-describedby="helpBlock-{{ producerInfo.nameOfInput }}">
{% for selectElem in producerInfo.element.entries %}
<option value="{{ selectElem.key }}" {{ producerInfo.elementResult.value == selectElem.key?"SELECTED":"" }}>{{ selectElem.value }}</option>
{% endfor %}
</select>
{% if producerInfo.element.oneValueElement.decoration.helptext is not empty %}
<span id="helpBlock-{{ producerInfo.nameOfInput }}" class="help-block">{{ producerInfo.element.oneValueElement.decoration.helptext }}</span>
{% endif %}
</div>
{% endmacro %}

{% macro renderCheckBoxType(producerInfo) %}
{{ startingDiv(producerInfo) }}
{{ label(producerInfo.nameOfInput, producerInfo.element.decoration.label) }}
<input tabindex="{{ producerInfo.tabIndex }}" type="checkbox" name="{{ producerInfo.nameOfInput }}" value="" {{ producerInfo.elementResult.valueObject?"checked":"" }} aria-describedby="helpBlock-{{ producerInfo.nameOfInput }}">
{% if producerInfo.element.decoration.helptext is not empty %}
<span id="helpBlock-{{ producerInfo.nameOfInput }}" class="help-block">{{ producerInfo.element.decoration.helptext }}</span>
{% endif %}
</div>
{% endmacro %}

{% macro jw_renderElementFree(producerInfo) %}
{% if  producerInfo.elementTypeName == "jwebform.element.XSRFProtectionType" %}
{{ producerInfo.html | raw }}
{% elseif producerInfo.elementTypeName == "jwebform.element.TextType" %}
{{ renderTextType(producerInfo, "text") }}
{% elseif producerInfo.elementTypeName == "jwebform.element.SubmitType" %}
{{ renderSubmit(producerInfo) }}
{% elseif producerInfo.elementTypeName == "jwebform.element.NumberType" %}
{{ renderTextType(producerInfo, "number") }}
{% elseif producerInfo.elementTypeName == "jwebform.element.TextDateType" %}
{{ renderTextDateType(producerInfo) }}
{% elseif producerInfo.elementTypeName == "jwebform.element.SelectType" %}
{{ renderSelectType(producerInfo) }}
{% elseif producerInfo.elementTypeName == "jwebform.element.CheckBoxType" %}
{{ renderCheckBoxType(producerInfo) }}
{% elseif producerInfo.elementTypeName == "jwebform.element.TextAreaType" %}
{{ renderTextAreaType(producerInfo) }}
{% elseif producerInfo.elementTypeName == "jwebform.element.SelectDateType" %}
{{ renderSelectDateType(producerInfo) }}
{% elseif producerInfo.elementTypeName == "jwebform.element.PasswordType" %}
{{ renderTextType(producerInfo, "password") }}
{% elseif producerInfo.elementTypeName == "jwebform.element.RadioType" %}
{{ renderRadioType(producerInfo) }}
{% else  %}
{{ producerInfo.elementTypeName }}
{% endif %}


{% endmacro %}

{#
TODO: 
Einzelne 
* Label ausgabe
* Input-Field ausgabe
* Helptext ausgabe
* error-Ausgabe
#}


{# renders the form completly within the template #}
{% macro jw_renderFormFree(form) %}
{{ jw_renderStart(form) }}
{% for producerInfo in form.unrenderedElements %}
{{ jw_renderElementFree(producerInfo) }}
{% endfor %}
{{ jw_renderEnd(form) }}
{% endmacro %}